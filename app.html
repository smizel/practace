<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">


</head>
<body>


</body>

<script>
    function deep(data, list = new WeakMap()) {
        if (typeof data === 'object') {
            if (list.has(data)) {
                return list.get(data)
            }
            if (Array.isArray(data)) {
                let newArr = [];
                list.set(data, newArr);
                data.map(e => {
                    const val = (typeof e === 'object') ? deep(e, list) : e;
                    newArr.push(val)
                });
                return newArr;
            } else {
                if (data) {
                    let newObj = {};
                    list.set(data, newObj);
                    for (let key in data) {
                        const val = deep(data[key], list);
                        newObj[key] = val;
                    }
                    return newObj;
                } else {
                    return data;
                }
            }
        } else {
            return data
        }
    }

</script>
</html>


